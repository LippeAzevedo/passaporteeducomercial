<!DOCTYPE html>
<html lang="pt-BR" class=""> <!-- A classe 'dark' será adicionada aqui via JS -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consultoria Comercial - Passaporte Edu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos Globais e de Componentes Customizados */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
            transition: background-color 0.3s ease;
        }
        .dark body {
            background-color: #0f172a; /* slate-900 */
        }

        /* Scrollbar Customizada */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; border-radius: 10px; }
        .dark ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 10px; }
        .dark ::-webkit-scrollbar-thumb { background: #64748b; }
        ::-webkit-scrollbar-thumb:hover { background: #334155; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Estilos das Abas de Navegação */
        .tab-button { transition: color 0.2s ease, border-color 0.2s ease; }
        .tab-active {
            border-bottom-width: 3px;
            border-color: #2563eb; /* blue-600 */
            color: #2563eb; /* blue-600 */
            font-weight: 600;
        }
        .dark .tab-active { border-color: #3b82f6; color: #3b82f6; } /* blue-500 */
        .tab-inactive {
            border-bottom-width: 3px;
            border-color: transparent;
            color: #475569; /* slate-600 */
        }
        .dark .tab-inactive { color: #94a3b8; } /* slate-400 */
        .tab-inactive:hover {
            color: #1e40af; /* blue-800 */
            border-bottom-color: #93c5fd; /* blue-300 */
        }
        .dark .tab-inactive:hover { color: #60a5fa; border-bottom-color: #1e40af; } /* blue-400, blue-800 */

        /* Animação e Visibilidade de Conteúdo */
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .rebuttal-card, .dashboard-card, .script-example { animation: slideInUp 0.4s ease-out; }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Estilos do "Jornada do Atendimento" e "Leia-me, CEO" */
        .signature { font-family: 'Brush Script MT', 'Brush Script Std', 'Comic Sans MS', cursive; font-size: 1.5rem; color: #1e40af; margin-top: 1rem; }
        .dark .signature { color: #60a5fa; }
        
        .script-step-content {
            background-color: #f8fafc; /* slate-50 */
            border: 1px solid #e2e8f0; /* slate-200 */
            padding: 1rem 1.5rem;
            margin-top: 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
        }
        .dark .script-step-content {
            background-color: #1e293b; /* slate-800 */
            border-color: #334155; /* slate-700 */
        }
        .script-step-content h4 {
            font-weight: 600;
            color: #1d4ed8; /* blue-700 */
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .dark .script-step-content h4 { color: #60a5fa; /* blue-400 */ }
        .script-step-content h5 {
            font-weight: 600;
            color: #1e40af; /* blue-800 */
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        .dark .script-step-content h5 { color: #93c5fd; }
        .script-step-content blockquote {
            border-left: 4px solid #93c5fd; /* blue-300 */
            padding-left: 1rem;
            margin: 0.5rem 0;
            font-style: italic;
            color: #475569; /* slate-600 */
        }
        .dark .script-step-content blockquote {
            border-left-color: #3b82f6; /* blue-500 */
            color: #94a3b8; /* slate-400 */
        }

        /* Estilos do Modo Escuro (Dark Mode Toggle) */
        .toggle-bg:after { content: ''; @apply absolute top-0.5 left-0.5 bg-white border border-gray-300 rounded-full h-5 w-5 transition shadow-sm; }
        input:checked + .toggle-bg:after { transform: translateX(100%); @apply border-white; }
        input:checked + .toggle-bg { @apply bg-blue-600; }
        
        /* Estilos do Manual do Consultor */
        .manual-module-content { background-color: #ffffff; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #e2e8f0; margin-top: 0.75rem; color: #334155; font-size: 0.95rem; line-height: 1.7; }
        .dark .manual-module-content { background-color: #1e293b; border-color: #334155; color: #cbd5e1; }
        .manual-module-content h3 { font-size: 1.25rem; font-weight: 700; color: #1e3a8a; margin-bottom: 1rem; }
        .dark .manual-module-content h3 { color: #60a5fa; }
        .manual-module-content h4 { font-size: 1.1rem; font-weight: 600; color: #1e40af; margin-top: 1.5rem; margin-bottom: 0.75rem; border-bottom: 2px solid #dbeafe; padding-bottom: 0.25rem; }
        .dark .manual-module-content h4 { color: #93c5fd; border-bottom-color: #1e40af;}
        .manual-module-content p { margin-bottom: 1rem; }
        .manual-module-content ul { list-style-type: disc; margin-left: 1.25rem; margin-bottom: 1rem; }
        .manual-module-content strong { font-weight: 600; color: #1e40af; }
        .dark .manual-module-content strong { color: #93c5fd; }
        .manual-module-content .scenario {
            background-color: #f0f9ff; /* sky-50 */
            border-left: 4px solid #3b82f6; /* blue-500 */
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.25rem;
        }
        .dark .manual-module-content .scenario {
             background-color: #1e293b;
             border-left-color: #60a5fa;
        }

        /* Estilos do Dashboard */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
        .chart-container {
            position: relative;
            height: 250px;
            width: 250px;
        }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen p-4">

    <!-- Tela de Login -->
    <div id="login-screen" class="bg-white dark:bg-slate-800 shadow-2xl rounded-xl p-8 md:p-12 w-full max-w-md flex flex-col items-center">
        <img src="https://www.passaporteedu.com.br/images/logotipo_slogan.svg" alt="Logo Passaporte Edu" class="mx-auto h-20 mb-8" onerror="this.src='https://placehold.co/300x80/e2e8f0/475569?text=Passaporte+Edu'"/>
        <h2 class="text-2xl font-bold text-center text-blue-700 dark:text-blue-400 mb-2">Acesso Restrito</h2>
        <p class="text-center text-slate-600 dark:text-slate-400 mb-8">Ferramenta de Apoio Comercial</p>
        <form id="login-form" class="w-full">
            <div class="mb-4">
                <label for="username" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Utilizador</label>
                <input type="text" id="username" name="username" required class="w-full p-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-slate-900 dark:text-slate-100">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Senha</label>
                <input type="password" id="password" name="password" required class="w-full p-3 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-slate-900 dark:text-slate-100">
            </div>
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold p-3 rounded-lg shadow-md transition duration-150 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 focus:ring-blue-500">Entrar</button>
            <p id="login-error" class="text-red-500 text-sm text-center mt-4 hidden"></p>
        </form>
    </div>

    <!-- Conteúdo Principal da Aplicação -->
    <div id="main-app-content" class="bg-white dark:bg-slate-800 shadow-2xl rounded-xl p-6 md:p-10 w-full max-w-5xl hidden">
        <header class="text-center mb-6 relative">
            <img src="https://www.passaporteedu.com.br/images/logotipo_slogan.svg" alt="Logo Passaporte Edu" class="mx-auto h-16 md:h-20 mb-4" onerror="this.src='https://placehold.co/300x80/e2e8f0/475569?text=Passaporte+Edu'"/>
            <h1 class="text-2xl md:text-3xl font-bold text-blue-700 dark:text-blue-400">Ferramenta de Apoio Comercial</h1>
            <p class="text-slate-600 dark:text-slate-400 mt-1 text-base md:text-lg">Olá, <span id="welcome-username" class="font-semibold">Consultor</span>!</p>
            <!-- Dark Mode Toggle -->
            <div class="absolute top-0 right-0 flex items-center space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                <label for="dark-mode-toggle" class="flex items-center cursor-pointer"><div class="relative"><input type="checkbox" id="dark-mode-toggle" class="sr-only"><div class="block bg-slate-200 dark:bg-slate-700 w-11 h-6 rounded-full toggle-bg"></div></div></label>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
            </div>
        </header>
        
        <nav class="mb-8 border-b border-slate-300 dark:border-slate-600">
            <ul class="flex flex-wrap -mb-px text-sm font-medium text-center" role="tablist">
                <li class="mr-2" role="presentation"><button class="tab-button inline-block p-3 md:p-4 border-b-2 rounded-t-lg tab-active" id="dashboard-tab" data-tabs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="true">Meu Desempenho</button></li>
                <li class="mr-2" role="presentation"><button class="tab-button inline-block p-3 md:p-4 border-b-2 rounded-t-lg tab-inactive" id="arguments-tab" data-tabs-target="#arguments" type="button" role="tab" aria-controls="arguments" aria-selected="false">Guia de Argumentos</button></li>
                <li class="mr-2" role="presentation"><button class="tab-button inline-block p-3 md:p-4 border-b-2 rounded-t-lg tab-inactive" id="manual-tab" data-tabs-target="#manual" type="button" role="tab" aria-controls="manual" aria-selected="false">Apostilas do Consultor</button></li>
                <li class="mr-2" role="presentation"><button class="tab-button inline-block p-3 md:p-4 border-b-2 rounded-t-lg tab-inactive" id="script-helper-tab" data-tabs-target="#script-helper" type="button" role="tab" aria-controls="script-helper" aria-selected="false">Jornada do Atendimento</button></li>
                <li id="readme-ceo-nav-item" class="mr-2 hidden" role="presentation"><button class="tab-button inline-block p-3 md:p-4 border-b-2 rounded-t-lg tab-inactive" id="readme-ceo-tab" data-tabs-target="#readme-ceo" type="button" role="tab" aria-controls="readme-ceo" aria-selected="false">Leia-me, CEO</button></li>
            </ul>
        </nav>

        <main>
            <!-- ABA: Dashboard de Desempenho -->
            <div id="dashboard" class="content-section active" role="tabpanel" aria-labelledby="dashboard-tab">
                 <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl md:text-2xl font-semibold text-slate-800 dark:text-slate-100">Visão Geral da Performance</h2>
                    <button id="edit-numbers-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition">Editar Meus Números</button>
                </div>
                
                <!-- Card de Entrada de Dados (Inicialmente oculto) -->
                <div id="performance-inputs-container" class="dashboard-card bg-slate-50 dark:bg-slate-700/60 p-6 rounded-lg shadow-md mb-6 hidden">
                    <h3 class="font-semibold text-slate-800 dark:text-slate-200 mb-4">Entrada de Dados do Mês</h3>
                    <div id="performance-inputs" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div>
                            <label for="target-input" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Meta de Matrículas</label>
                            <input type="number" id="target-input" value="20" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100">
                        </div>
                        <div>
                            <label for="achieved-input" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Matrículas Alcançadas</label>
                            <input type="number" id="achieved-input" value="0" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100">
                        </div>
                        <div>
                            <label for="visits-input" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Visitas Realizadas</label>
                            <input type="number" id="visits-input" value="0" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100">
                        </div>
                        <div>
                            <label for="closings-input" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Atendimentos Concluídos</label>
                            <input type="number" id="closings-input" value="0" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100">
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Card de Metas -->
                    <div class="dashboard-card bg-slate-50 dark:bg-slate-700/60 p-6 rounded-lg shadow-md flex flex-col items-center">
                        <h3 class="font-semibold text-slate-800 dark:text-slate-200 mb-4">Progresso da Meta</h3>
                        <div class="chart-container"><canvas id="goal-chart"></canvas></div>
                         <p class="text-sm text-slate-500 dark:text-slate-400 mt-2" id="goal-details-text">(0 de 20 matrículas)</p>
                    </div>
                    <!-- Card de Conversão -->
                    <div class="dashboard-card bg-slate-50 dark:bg-slate-700/60 p-6 rounded-lg shadow-md flex flex-col items-center">
                        <h3 class="font-semibold text-slate-800 dark:text-slate-200 mb-4">Taxa de Conversão</h3>
                        <div class="chart-container"><canvas id="conversion-chart"></canvas></div>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2" id="conversion-details-text">(0 matrículas de 0 visitas)</p>
                    </div>
                    <!-- Card de Conclusão do Atendimento -->
                     <div class="dashboard-card bg-slate-50 dark:bg-slate-700/60 p-6 rounded-lg shadow-md flex flex-col items-center">
                        <h3 class="font-semibold text-slate-800 dark:text-slate-200 mb-4">Taxa de Conclusão do Atendimento</h3>
                        <div class="chart-container"><canvas id="closing-chart"></canvas></div>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2" id="closing-details-text">(0 atendimentos de 0 visitas)</p>
                    </div>
                </div>
            </div>

            <!-- ABA: Guia de Argumentos -->
            <div id="arguments" class="content-section" role="tabpanel" aria-labelledby="arguments-tab">
                <!-- Personalização Dinâmica -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-700">
                    <div><label for="student-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Nome do Aluno(a):</label><input type="text" id="student-name" placeholder="Ex: João" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100"></div>
                    <div><label for="leader-name" class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">Nome do Líder/Gerente:</label><input type="text" id="leader-name" placeholder="Ex: Hugo" class="w-full p-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-1 focus:ring-blue-500 text-slate-900 dark:text-slate-100"></div>
                </div>
                <div class="mb-4">
                    <label for="objection-search" class="block text-md font-semibold text-slate-700 dark:text-slate-200 mb-2">Busque ou Selecione a Objeção:</label>
                    <input type="text" id="objection-search" placeholder="Buscar por palavra-chave... (ex: 'caro', 'tempo')" class="w-full p-3 mb-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 text-slate-900 dark:text-slate-100">
                </div>
                <div class="mb-6"><select id="objection-select" class="w-full p-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 transition duration-150 ease-in-out text-slate-700 dark:text-slate-300"><option value="">-- Escolha uma objeção --</option></select></div>
                <div id="selected-objection-container" class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800/40 rounded-lg shadow-sm hidden"><h3 class="text-lg font-semibold text-blue-700 dark:text-blue-400 mb-2">Objeção Selecionada:</h3><p id="selected-objection-text" class="text-slate-700 dark:text-slate-300 text-sm md:text-base"></p></div>
                <h2 class="text-xl md:text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4 hidden" id="rebuttals-title">Sugestões de Quebra de Objeção:</h2>
                <div id="rebuttals-container" class="space-y-4"></div>
            </div>

            <!-- ABA: Apostilas do Consultor -->
            <div id="manual" class="content-section" role="tabpanel" aria-labelledby="manual-tab">
                 <h2 class="text-xl md:text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4">Apostilas do Consultor Passaporte Edu</h2>
                <div class="space-y-4 text-slate-700 dark:text-slate-300 text-sm md:text-base leading-relaxed">
                    <p>Bem-vindo ao seu guia completo para o sucesso. Este material é dedicado ao seu desenvolvimento contínuo como um consultor educacional de elite.</p>
                    <div id="manual-container" class="mt-6 space-y-3">
                        <!-- Módulos serão inseridos aqui pelo JS -->
                    </div>
                </div>
            </div>

            <!-- ABA: Jornada do Atendimento -->
            <div id="script-helper" class="content-section" role="tabpanel" aria-labelledby="script-helper-tab">
                <h2 class="text-xl md:text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-6">Jornada do Atendimento: Roteiro Consultivo</h2>
                <div id="script-steps-container" class="space-y-3">
                    <!-- Passos do script serão inseridos aqui pelo JS -->
                </div>
            </div>
            
            <!-- ABA: Leia-me, CEO -->
             <div id="readme-ceo" class="content-section" role="tabpanel" aria-labelledby="readme-ceo-tab">
                <h2 class="text-xl md:text-2xl font-semibold text-slate-800 dark:text-slate-100 mb-4">Mensagem para o CEO</h2>
                <div class="text-slate-700 dark:text-slate-300 text-sm md:text-base leading-relaxed space-y-3 bg-slate-50 dark:bg-slate-900/50 p-6 rounded-lg shadow">
                     <p>Olá, Sr. Douglas Peixoto.</p>
                     <p>Esta ferramenta é uma materialização de tudo aquilo que aprendi como consultor na Passaporte Edu.</p>
                     <p>Espero que seja uma grande ajuda para novos e antigos consultores.</p>
                     <p>Um grande abraço,</p>
                     <p class="signature">Philippe Azevedo</p>
                </div>
            </div>

        </main>
    </div>

    <footer class="text-center mt-8 mb-4 text-slate-500 dark:text-slate-400 text-xs md:text-sm">
        <p>&copy; <span id="currentYear"></span> Passaporte Edu. Ferramenta de Apoio Comercial.</p>
        <p class="mt-1">Developed By: Philippe Azevedo - v2.7</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // =================================================================================
    // DADOS DA APLICAÇÃO
    // =================================================================================
    const validUsers = { "hugoraphael": "Passaporteedu@2025", "douglaspeixoto": "douglaspeixoto@passaporteedu", "felipebatista": "Passaporteedu@2025", "philippeazevedo": "Passaporteedu@2025", "alexandremoura": "am@passaporte2025", "raulfarias": "rf@passaporte2025", "pauloazevedo": "pa@passaporte2025", "carlabeatriz": "cb@passaporte2025", "augustocaldas": "ac@passaporte2025", "elanearaujo": "ea@passaporte2025", "brunadarc": "bd@passaporte2025", "priscilaoliveira": "po@passaporte2025", "anarodrigues": "ar@passaporte2025", "fhylipebrandao": "fb@passaporte2025", "nathalyasibele": "ns@passaporte2025" };
    
    const salesData = [ { id: "preco", objection: "O curso é muito caro. / Não tenho condições agora.", rebuttals: [ "Eu entendo perfeitamente sua preocupação com o investimento. Muitas mães sentem o mesmo. Por isso, quero que veja isso não como um custo, mas como a semente de um futuro com mais oportunidades para o(a) [aluno]. O valor que apresentamos já reflete nosso esforço para viabilizar essa transformação.", "Compreendo. É exatamente por pensar em famílias como a sua que criamos opções de parcelamento. A ideia é que este investimento no futuro do(a) [aluno] se encaixe de forma suave no seu planejamento, sem pesar. Podemos ver juntos uma parcela que fique confortável?", "Faz todo o sentido sua análise. E se, além do valor, pensarmos no retorno? Uma certificação como a de Cambridge, por exemplo, pode abrir portas que valem muitas vezes mais que este investimento. Estamos falando de preparar o(a) [aluno] para um futuro onde ele(a) terá mais escolhas e segurança.", ] }, { id: "tempo", objection: "Meu filho já faz muitas atividades, não sei se terá tempo.", rebuttals: [ "Eu imagino a correria! A rotina de vocês deve ser intensa. É por isso que nossas aulas são desenhadas para serem o ponto alto da semana dele(a): dinâmicas, envolventes e que otimizam cada minuto. Não é mais uma obrigação, é um momento de desenvolvimento prazeroso. Qual seria o dia que vocês têm um 'respiro' na agenda?", "Essa é uma preocupação muito comum. O que muitos pais percebem é que, ao desenvolver habilidades como as que ensinamos, o(a) [aluno] na verdade ganha tempo, pois se torna mais organizado(a) e focado(a) nas outras atividades. É um investimento de tempo que se paga com mais produtividade.", ] }, { id: "desconhecimento", objection: "Não conheço a Passaporte Edu muito bem. / Essa escola é nova?", rebuttals: [ "Que bom que perguntou! É muito importante sentir segurança onde investimos no futuro dos nossos filhos. A Passaporte Edu já transformou a vida de milhares de jovens em nossas unidades. Mais do que uma escola, somos um ecossistema de desenvolvimento, e a prova da nossa qualidade é o selo de Centro Preparatório Oficial Cambridge, um reconhecimento internacional que poucas escolas têm.", "Entendo sua cautela. Por isso, não quero que acredite apenas nas minhas palavras. Gostaria de te mostrar alguns projetos de alunos e, se quiser, podemos até agendar para você conversar com uma mãe que, assim como você, também tinha essa dúvida no início." ] }, { id: "gostar", objection: "Será que meu filho vai gostar? / Ele é muito tímido(a).", rebuttals: [ "Essa é a minha preocupação número um também. De nada adianta a melhor metodologia se a criança não se sente feliz e acolhida. Nossas turmas são pequenas justamente para que o professor possa entender a personalidade de cada um e criar um ambiente onde até os mais tímidos se sentem seguros para participar e brilhar.", "Entendo perfeitamente. Muitos dos nossos alunos mais participativos hoje eram tímidos no início. Nossos cursos de Oratória e habilidades socioemocionais, integrados ao aprendizado, são desenhados para construir essa autoconfiança de forma natural e divertida. Ele(a) vai aprender a se expressar, e não apenas a matéria." ] }, { id: "experiencia_negativa", objection: "Já tentei outros cursos e não deu certo.", rebuttals: [ "Sinto muito que tenha tido essa experiência. Agradeço por compartilhar e me dar a chance de mostrar porque somos diferentes. O que, na sua opinião, faltou nos outros lugares para que o(a) [aluno] tivesse sucesso? É muito importante para mim entender isso.", "É exatamente por causa de experiências como a sua que focamos em resultados que você pode ver e tocar. Por exemplo, nosso curso de inglês não termina com um 'certificado da escola', mas prepara o(a) [aluno] para uma certificação de Cambridge, um documento reconhecido no mundo todo que comprova a proficiência dele(a)." ] }, { id: "pensar", objection: "Vou pensar e depois retorno.", rebuttals: [ "Claro, é uma decisão muito importante e respeito seu tempo. Para que sua reflexão seja a mais produtiva possível, ficou alguma dúvida ou algum ponto que não te deixou 100% segura? Quero garantir que você tenha todas as informações para tomar a melhor decisão para o(a) [aluno].", "Com certeza. E enquanto a senhora pensa, gostaria de deixar algo em sua mente: o 'time' perfeito para investir no futuro é sempre o agora. Cada dia de aprendizado é um passo a mais que o(a) [aluno] dá em direção a um futuro brilhante. Se houver algo que eu possa fazer para te dar essa segurança hoje, por favor, me diga." ] }, { id: "material_didatico", objection: "Este material didático é obrigatório mesmo?", rebuttals: [ "Sim, e explico o porquê: o material não é um 'extra', ele é o mapa da nossa jornada de aprendizado. É a ferramenta que conecta o que o professor ensina em sala com a prática em casa, garantindo que o conhecimento seja realmente absorvido. Sem ele, seria como ir a uma viagem sem o GPS.", "Entendo a pergunta. O valor do material reflete a qualidade de uma ferramenta desenvolvida por especialistas internacionais, como a Cambridge University Press. É um investimento único que garante que o(a) [aluno] terá o melhor recurso do início ao fim do seu desenvolvimento conosco." ] }, { id: "marido", objection: "Tenho que falar com meu marido.", rebuttals: [ "Com certeza, uma decisão familiar é sempre mais forte. Tenho certeza que seu marido vai apoiar uma escolha que trará tantos benefícios para o(a) [aluno]. O que muitas mães fazem, para não perder a condição especial que o(a) [líder] liberou para hoje, é garantir a vaga através da nossa pré-matrícula, que já trava esse benefício. Assim, a senhora pode conversar com ele com a tranquilidade de que a oportunidade para o(a) [aluno] já está reservada. O que acha?", ] }, { id: "distancia", objection: "A distância é um problema.", rebuttals: [ "Compreendo a questão da logística. Muitos pais que moram em outros bairros nos dizem que o tempo que investem no trajeto é compensado pela certeza de que seus filhos estão recebendo uma educação de padrão internacional, algo que não encontraram mais perto. É um investimento de tempo para economizar preocupações no futuro.", "Apenas algumas vezes por semana, o(a) [aluno] terá acesso a um ambiente que pode mudar a trajetória da vida dele(a). Se colocarmos na balança o benefício de uma formação de excelência contra o esforço do deslocamento, o futuro dele(a) não merece essa prioridade?" ] }, { id: "desempregada", objection: "Estou desempregada.", rebuttals: [ "Eu sinto muito por este momento e admiro ainda mais sua força em estar aqui, buscando o melhor para o(a) [aluno]. É justamente em momentos desafiadores que investir na educação dos filhos se torna o ato de maior esperança. Este curso pode ser a ferramenta que abrirá as portas para que ele(a) tenha um futuro mais seguro e estável.", "Entendo completamente. Por isso, quero que saiba que a primeira parcela do curso em si é só daqui a 30 dias. O investimento para garantir a vaga hoje é apenas no material didático. Isso te daria um fôlego para se organizar, com a certeza de que já garantiu o futuro do seu filho." ] }, { id: "desconfianca_escolas", objection: "Já ouvi falar de escolas que prometem muito e não cumprem.", rebuttals: [ "A senhora tem toda a razão em ser cautelosa. O mercado está cheio de promessas. É por isso que na Passaporte Edu preferimos falar de provas. A chancela de Centro Preparatório Cambridge não é uma promessa nossa, é um atestado de qualidade de uma das maiores universidades do mundo. Isso significa que somos auditados e seguimos um padrão de excelência internacional.", "Entendo seu receio. Por isso, mais do que te falar, eu gostaria de te mostrar. Nossas redes sociais estão cheias de projetos de alunos, depoimentos de pais e resultados reais. A nossa reputação é construída pela satisfação das famílias que confiam em nós." ] }, { id: "situacao_economica", objection: "Com a situação atual, é difícil investir em algo a mais.", rebuttals: [ "Eu concordo, a situação econômica exige que a gente priorize cada centavo. E é por isso que estou aqui para te mostrar que a educação de qualidade não é 'algo a mais', é o investimento mais seguro e rentável que podemos fazer. É o que vai blindar o futuro do(a) [aluno] contra qualquer crise.", "Compreendo. Muitos pais sentem o mesmo. No entanto, as habilidades que o(a) [aluno] desenvolverá aqui, como fluência em inglês, pensamento computacional e inteligência financeira, são à prova de crise. São ferramentas que o tornarão mais valioso e preparado para qualquer cenário econômico." ] }
    ];

    const manualModules = [
        { title: "Apostila 1: A Psicologia da Venda Consultiva", content: `<h3>Apostila 1: A Psicologia da Venda Consultiva</h3><p><strong>Nossa missão não é vender cursos. É construir confiança e guiar os pais numa decisão crucial para o futuro de seus filhos.</strong> A venda consultiva é sobre entender o ser humano à sua frente, suas esperanças e seus medos.</p><h4>A Mentalidade do Consultor de Elite</h4><ul><li><strong>Você é um Guia, não um Vendedor:</strong> Sua postura deve ser de um especialista que está ali para ajudar, ouvir e orientar. A venda é a consequência natural de uma consultoria bem feita. Você não está empurrando um produto, está apresentando uma solução para uma dor ou um sonho que acabou de ouvir.</li><li><strong>Escuta Empática Ativa:</strong> Não ouça apenas as palavras, ouça os sentimentos por trás delas. Uma mãe que diz "ele é tímido" está, na verdade, dizendo "eu tenho medo que meu filho não se encaixe e sofra". Sua resposta deve acolher o sentimento ("Eu entendo completamente essa preocupação...") antes de apresentar a solução.</li><li><strong>Curiosidade Genuína:</strong> Interesse-se de verdade pela história da família. Pergunte sobre os hobbies do aluno, sobre a dinâmica da família. A paixão pelo que você faz transparece quando você demonstra que se importa com as pessoas, não apenas com os números.</li></ul><h4>Na Prática: Traduzindo para a Conversa</h4><div class="scenario"><p>Ao invés de perguntar "Qual curso você procura?", experimente: "Para que eu possa ajudar da melhor forma, me conte um pouco sobre o momento de vida do(a) [aluno]. O que vocês, como pais, mais sonham para o futuro dele(a)?"</p></div>` },
        { title: "Apostila 2: Sondagem Profunda - O Coração da Venda", content: `<h3>Apostila 2: Sondagem Profunda - O Coração da Venda</h3><p>A sondagem é onde a venda é ganha ou perdida. É o momento de coletar as 'matérias-primas' emocionais que você usará para construir sua argumentação. Sem uma boa sondagem, seus argumentos serão genéricos e sem impacto.</p><h4>Técnica do Funil de Perguntas</h4><p>Comece com perguntas abertas e vá aprofundando para as mais específicas e emocionais. O objetivo é sair do superficial e chegar no 'porquê' da visita.</p><ul><li><strong>Nível 1 (Abertas - O Quê?):</strong> "Me conte um pouco sobre o(a) [aluno]. O que ele(a) mais gosta de fazer na escola e fora dela?"</li><li><strong>Nível 2 (Aprofundamento - Como?):</strong> "Interessante! E como vocês percebem a importância de habilidades como o inglês para o futuro dele(a) nessa área de [interesse do aluno] que você mencionou?"</li><li><strong>Nível 3 (Emocionais - Por Quê?):</strong> "Entendi. E qual é o maior sonho que a senhora, como mãe, tem para o futuro do(a) [aluno]? O que te deixaria imensamente orgulhosa de ver ele(a) conquistando?"</li></ul><h4>O Poder do Silêncio</h4><p>Após uma pergunta emocional, fique em silêncio. Deixe a mãe pensar e sentir. A resposta que virá será carregada de valor e verdade. É nessa resposta que você encontrará a chave para o fechamento. Não tenha medo da pausa; ela demonstra respeito e confiança.</p>` },
        { title: "Apostila 3: Apresentação de Impacto - Pintando o Futuro", content: `<h3>Apostila 3: Apresentação de Impacto - Pintando o Futuro</h3><p>Sua apresentação não deve ser sobre as características dos cursos, mas sobre a <strong>transformação</strong> que eles proporcionam na vida do aluno. Você não vende aulas de inglês; você vende a confiança de uma apresentação em público, a alegria de um intercâmbio, a segurança de um bom emprego.</p><h4>Storytelling: A Jornada do Herói</h4><p>O herói da história é o aluno. A Passaporte Edu é o 'mentor' que lhe dará as 'ferramentas mágicas' para vencer os desafios. Use as informações da sondagem para personalizar a história.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Sra. [Nome], lembra que a senhora me disse que seu maior sonho é ver o(a) [aluno] se sentindo mais seguro e confiante? Imagine ele(a), que hoje é um pouco mais reservado, daqui a um ano, aqui na Passaporte Edu, liderando a apresentação de um projeto de robótica que ele mesmo criou, falando em inglês para os colegas e para vocês. Imagine o brilho nos olhos e o orgulho que vocês sentirão ao ver essa evolução. É essa a jornada que construímos aqui."</blockquote></div><h4>Conectando Características a Benefícios Emocionais</h4><ul><li><strong>Característica Técnica:</strong> "Somos Centro Preparatório Cambridge."<br><strong>Benefício Emocional:</strong> "Isso se traduz em <strong>segurança</strong> e <strong>tranquilidade</strong> para a senhora, a certeza de que seu filho está recebendo uma educação de padrão internacional, um verdadeiro passaporte que abrirá qualquer porta que ele(a) queira no futuro, sem limites."</li><li><strong>Característica Técnica:</strong> "Temos cursos de empreendedorismo."<br><strong>Benefício Emocional:</strong> "Isso significa que estamos preparando o(a) [aluno] não para ser apenas um bom empregado, mas para ser o <strong>protagonista</strong> da sua própria história, alguém capaz de criar suas próprias oportunidades. É o <strong>alívio</strong> de saber que ele(a) terá as ferramentas para se virar, não importa o cenário econômico."</li></ul>`},
        { title: "Apostila 4: Lidando com Preocupações (Objeções)", content: `<h3>Apostila 4: Lidando com Preocupações (Objeções)</h3><p>Uma objeção não é um "não". É um pedido de mais informações ou de mais segurança. É um sinal de interesse. Se o cliente não tivesse interesse, ele simplesmente iria embora.</p><h4>Valide Antes de Contornar</h4><p>A regra de ouro. Nunca confronte. Sempre valide o sentimento da mãe. Isso a desarma e a coloca ao seu lado, mostrando que você está ali para ajudar, não para vencer uma discussão.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><ul><li><strong>Objeção:</strong> "Achei o valor um pouco alto."</li><li><strong>Resposta Errada:</strong> "Mas não é caro pela qualidade que oferecemos." (Confronto)</li><li><strong>Resposta Certa:</strong> "Eu entendo perfeitamente que o investimento na educação dos filhos é um ponto importante no planejamento da família. É uma decisão que precisa ser bem pensada. E é exatamente por isso que quero te mostrar o retorno que este investimento trará em forma de oportunidades para o(a) [aluno]..." (Validação + Transição)</li></ul></div><h4>A Técnica do "Isolamento"</h4><p>Antes de responder a uma objeção, isole-a para saber se é a única preocupação real. Isso evita que você resolva um problema e o cliente apresente outro em seguida.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Sra. [Nome], entendi a questão do valor. E faz todo sentido. Mas, só para eu entender, se a questão do investimento estivesse resolvida, se ele se encaixasse perfeitamente no seu orçamento, haveria mais alguma coisa que te impediria de tomar essa decisão pelo futuro do(a) [aluno] hoje?"</blockquote><p>Se ela disser "não, seria só isso", você sabe que só precisa focar em justificar o valor. Se ela trouxer outra questão ("Ah, também tenho que ver a questão do tempo..."), você descobriu a objeção real que talvez estivesse por trás da primeira.</p></div>`},
        { title: "Apostila 5: O Ecossistema Passaporte Edu", content: `<h3>Apostila 5: Vendendo a Formação Completa</h3><p>Nosso maior diferencial é não sermos uma escola de um curso só. Somos um centro de desenvolvimento de habilidades para o século 21. A venda mais eficaz é a que mostra como nossas diferentes áreas se conectam para formar um jovem completo.</p><h4>A Trilha do Conhecimento</h4><p>Apresente os eixos (Be Bilingual, Be a Coder, Be a Boss) como uma trilha que se complementa. Não venda produtos, venda um projeto de vida.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"O que fazemos aqui, Sra. [Nome], é único. No 'Be Bilingual', damos ao(à) [aluno] a voz para se comunicar com o mundo. No 'Be a Coder', damos a ele(a) a capacidade de entender e criar a tecnologia que move esse mundo. E no 'Be a Boss', ensinamos ele(a) a ter a atitude e as ferramentas para liderar e transformar ideias em realidade. Uma habilidade potencializa a outra, criando um jovem preparado para qualquer desafio que a vida apresentar."</blockquote></div><h4>Identificando Oportunidades de Cross-selling</h4><p>Durante a sondagem, se a mãe menciona que o filho é criativo mas desorganizado, você tem a deixa perfeita para conectar dois de nossos pilares.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"É maravilhoso que ele seja tão criativo! E o nosso curso de Robótica pode ser um canal incrível para essa criatividade. E sabe o que é interessante? Muitos pais combinam a Robótica com o nosso curso de Educação Financeira, porque ele ensina justamente a organização e o planejamento que transformam a criatividade em projetos concretos. É a união perfeita da inventividade com a disciplina para que as ideias dele saiam do papel."</blockquote></div>`},
        { title: "Apostila 6: A Arte do Fechamento", content: `<h3>Apostila 6: A Arte do Fechamento</h3><p>O fechamento é o momento de transformar a conexão e o valor construídos em um compromisso. O objetivo é fazer a mãe sentir que está tomando a melhor decisão da vida dela pelo filho. Você deve conduzir essa etapa com segurança e tranquilidade.</p><h4>O Programa Educacional</h4><p>A condição especial não é um mero desconto. É a inclusão da família em um programa seleto. Isso eleva o status da oferta e cria um senso de pertencimento e oportunidade única.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Sra. [Nome], pelo padrão de excelência que oferecemos, com a chancela Cambridge e nosso ecossistema completo, nosso Valor Social para esta jornada de desenvolvimento é de [Valor Social]. Porém, para famílias como a sua, que chegam até aqui e demonstram um compromisso real com o futuro do filho, nós temos algo especial. O [Líder] me autorizou a incluir o(a) [aluno] em nosso <strong>Programa de Incentivo Educacional</strong>. Ao aderir a este programa hoje, o investimento se torna [Valor com Desconto]."</blockquote></div><h4>O Fechamento Presumido</h4><p>Aja como se a decisão já tivesse sido tomada. A dúvida gera dúvida. Após apresentar o valor, não pergunte "E então, vamos fechar?". Direcione a conversa para a próxima ação concreta.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Parabéns, tenho certeza de que o(a) [aluno] vai amar. Para qual e-mail eu posso enviar a confirmação da pré-matrícula dele(a)?"</blockquote><p>Outros exemplos: "O nome completo para a matrícula é [Nome Completo do Aluno], correto?" ou "Qual a melhor forma de pagamento para o material didático, cartão de crédito ou PIX?".</p></div>`},
        { title: "Apostila 7: Pós-Venda - O Início do Relacionamento", content: `<h3>Apostila 7: Pós-Venda - O Início do Relacionamento</h3><p>A matrícula não é o fim da sua relação com a família, é o começo. Um cliente satisfeito é sua maior fonte de novos negócios (indicações) e um testemunho vivo da qualidade do seu trabalho.</p><h4>O Contato de Boas-Vindas</h4><p>Uma semana após o início das aulas, um contato proativo é ouro. Mostra que você não estava interessado apenas na venda, mas no sucesso do aluno.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Olá, Sra. [Nome], aqui é o [Seu Nome] da Passaporte Edu. Não quero tomar seu tempo, só liguei para saber como foi a primeira semana do(a) [aluno]. Ele(a) se adaptou bem? Está gostando dos colegas e do professor?"</blockquote><p>Este simples ato demonstra cuidado e profissionalismo, e solidifica a certeza da mãe de que fez a escolha certa.</p></div><h4>Transformando Satisfação em Indicação</h4><p>Quando o feedback for positivo, essa é a hora de agir. O cliente está feliz e propenso a compartilhar essa felicidade.</p><div class="scenario"><h4>Na Prática: Traduzindo para a Conversa</h4><blockquote>"Fico genuinamente feliz em ouvir isso! Ver o desenvolvimento deles é o que nos move. Sra. [Nome], a sua experiência positiva é o nosso melhor cartão de visita. Inclusive, se a senhora tiver amigas que, assim como você, também sonham com um futuro brilhante para os filhos, eu ficaria muito honrado em recebê-las para uma conversa. A indicação de uma mãe satisfeita tem um peso enorme para nós e temos um programa especial de agradecimento por isso."</blockquote></div>`},
    ];

    const scriptSteps = [
        { title: 'Auto apresentação + quebra de gelo', content: `<h4>Mentalidade</h4><p>Meu objetivo não é vender, é fazer com que essa mãe se sinta acolhida e compreendida. Quero que ela pense: "Finalmente, alguém que me entende".</p><h4>Abordagem Emocional</h4><p>Seja caloroso, sorria com os olhos. Seu tom de voz deve ser calmo e seguro.</p><h4>Exemplo de Fala</h4><blockquote>"Olá, Sra. [Nome], seja muito bem-vinda à Passaporte Edu! Meu nome é [Seu Nome]. Fico muito feliz que tenha tirado um tempinho na sua agenda corrida para vir conversar sobre o futuro do(a) [aluno]. Por favor, fique à vontade, aceita uma água, um café? A casa é sua."</blockquote>`},
        { title: 'Sondagem', content: `<h4>Mentalidade</h4><p>Preciso descobrir o 'porquê' por trás do 'o quê'. Qual o sonho ou o medo que a trouxe até aqui? Preciso que ela me conte uma história, não que me dê respostas.</p><h4>Abordagem Emocional</h4><p>Faça perguntas abertas e demonstre escuta ativa, acenando com a cabeça e usando interjeições como "Entendo...", "Interessante...".</p><h5>Exemplos de Sondagem Pessoal</h5><blockquote>"Para começarmos, me fale um pouco sobre o(a) [aluno]. O que faz os olhos dele(a) brilharem?"</blockquote><blockquote>"E a senhora, como mãe, qual é o seu maior sonho para ele(a)? O que te faria sentir que cumpriu sua missão?"</blockquote><h5>Exemplos de Sondagem Educacional</h5><blockquote>"Como tem sido a jornada escolar dele(a) até aqui? Existe alguma área em que ele(a) se sente mais à vontade ou algum desafio que ele(a) enfrenta?"</blockquote><blockquote>"Além das notas, que tipo de habilidade a senhora acredita que faria uma grande diferença para o desenvolvimento dele(a) neste momento?"</blockquote><h5>Exemplos de Sondagem Profissional</h5><blockquote>"Pensando lá na frente, que tipo de pessoa e profissional a senhora sonha que o(a) [aluno] se torne?"</blockquote><blockquote>"Como a senhora enxerga a importância de habilidades como fluência em inglês ou entender de tecnologia para que ele(a) alcance esse sonho?"</blockquote>`},
        { title: 'Apresentação da Passaporte Edu', content: `<h4>Mentalidade</h4><p>Vou conectar cada palavra que ela me disse a uma solução que nós oferecemos. Vou mostrar a ela o futuro que ela sonha para o filho, e como nós somos a ponte para chegar lá.</p><h4>Abordagem Emocional</h4><p>Use um tom de voz inspirador. Use o nome do aluno frequentemente.</p><h4>Exemplo de Fala</h4><blockquote>"Sra. [Nome], o que a senhora me descreveu, esse sonho de ver o(a) [aluno] mais confiante e preparado para o mundo, é exatamente a razão pela qual a Passaporte Edu existe. Imagine ele(a), daqui a um tempo, não apenas falando inglês, mas usando o inglês para apresentar um projeto que ele(a) mesmo(a) criou no nosso curso de tecnologia. Imagine o orgulho. É essa transformação que nós construímos aqui."</blockquote>`},
        { title: 'Direcionamento de turma', content: `<h4>Mentalidade</h4><p>A decisão já foi tomada emocionalmente. Agora, vou apenas formalizar o caminho lógico. A matrícula não é uma opção, é o próximo passo natural.</p><h4>Abordagem Emocional</h4><p>Seja assertivo, mas gentil. Use uma linguagem que presume a continuidade.</p><h4>Exemplo de Fala</h4><blockquote>"Com base na idade e na personalidade incrível do(a) [aluno] que a senhora descreveu, o caminho perfeito para ele(a) começar essa jornada é na nossa turma [Nome da Turma]. As aulas são às [Dias] e [Horário]. Já estou até imaginando a interação dele(a) com os colegas. O que a senhora acha desse horário?"</blockquote>`},
        { title: 'Passagem de Valores', content: `<h4>Mentalidade</h4><p>Preciso ancorar o valor da nossa transformação antes de falar de números. O preço deve parecer pequeno perto do tamanho do sonho que vamos realizar.</p><h4>Abordagem Emocional</h4><p>Mantenha uma postura séria e profissional, que transmita o peso e a importância do que está sendo oferecido.</p><h4>Exemplo de Fala</h4><blockquote>"Sra. [Nome], para proporcionar essa transformação completa, com uma educação de padrão internacional validada por Cambridge e todo o nosso ecossistema de desenvolvimento, o Valor Social desta jornada educacional é de [Valor Social]."</blockquote>`},
        { title: 'Fechamento', content: `<h4>Mentalidade</h4><p>Este é o momento de empoderar a mãe. Ela não está comprando um curso, está fazendo um ato de amor e compromisso com o futuro do filho.</p><h4>Abordagem Emocional</h4><p>Peça permissão para trazer seu gestor. Isso cria um evento, um momento de importância.</p><h4>Exemplo de Fala</h4><blockquote><strong>(Consultor):</strong> "Sra. [Nome], vendo o seu comprometimento com o(a) [aluno], eu gostaria de verificar uma possibilidade especial para vocês. Com sua licença, vou chamar meu gerente, o [Líder], um instante."<br><br><strong>(Líder):</strong> "Sra. [Nome], o [Consultor] me contou a história de vocês e ficamos encantados. Para famílias comprometidas como a sua, temos o nosso <strong>Programa de Incentivo Educacional</strong>. Ao aderir a este programa hoje, o investimento para essa jornada se torna [Valor com Desconto]."</blockquote>`},
        { title: 'Pré Matrícula', content: `<h4>Mentalidade</h4><p>A venda acabou. Agora começa o relacionamento. Meu foco é em parabenizar, reforçar a decisão e fazer a mãe se sentir incrível.</p><h4>Abordagem Emocional</h4><p>Sorria, relaxe a postura. O tom é de celebração.</p><h4>Exemplo de Fala</h4><blockquote>"Seja muito bem-vinda à família Passaporte Edu! Sem dúvida, uma das melhores decisões que a senhora poderia tomar pelo futuro do(a) [aluno]. Vamos só preencher os dados para garantir a vaga dele(a) no programa. Me confirme seu nome completo, por favor..."</blockquote>`},
        { title: 'Passagem de cartão', content: `<h4>Mentalidade</h4><p>O material não é um custo, é o kit de ferramentas que o herói (aluno) precisa para sua jornada. É parte essencial.</p><h4>Abordagem Emocional</h4><p>Apresente o material com entusiasmo, como se estivesse entregando um presente.</p><h4>Exemplo de Fala</h4><blockquote>"Agora, a parte mais legal! Para que o(a) [aluno] tenha a melhor experiência possível, ele(a) receberá nosso kit de ferramentas para o sucesso: o material didático exclusivo. O investimento para este kit completo é de [Valor do Material]. Podemos acertar no cartão?"</blockquote>`},
        { title: 'Passagem de bastão para o administrativo', content: `<h4>Mentalidade</h4><p>Minha última impressão deve ser tão boa quanto a primeira. Preciso garantir que ela saia daqui segura, feliz e sem nenhuma dúvida.</p><h4>Abordagem Emocional</h4><p>Caminhe com a mãe até a porta. Entregue um cartão seu.</p><h4>Exemplo de Fala</h4><blockquote>"Prontinho, Sra. [Nome]! Tudo certo. O primeiro dia de aula do(a) [aluno] será na próxima [Dia da semana]. Nossa equipe vai te adicionar ao grupo de pais no WhatsApp para todas as comunicações. Mais uma vez, parabéns. Se tiver qualquer dúvida, este é o meu contato direto."</blockquote>`},
    ];
    
    // =================================================================================
    // SELEÇÃO DE ELEMENTOS DO DOM
    // =================================================================================
    const loginScreen = document.getElementById('login-screen');
    const mainAppContent = document.getElementById('main-app-content');
    const loginForm = document.getElementById('login-form');
    const loginError = document.getElementById('login-error');
    const tabButtons = document.querySelectorAll('.tab-button');
    const contentSections = document.querySelectorAll('.content-section');
    const readmeCeoNavItem = document.getElementById('readme-ceo-nav-item');
    const objectionSearch = document.getElementById('objection-search');
    const objectionSelect = document.getElementById('objection-select');
    const rebuttalsContainer = document.getElementById('rebuttals-container');
    const selectedObjectionContainer = document.getElementById('selected-objection-container');
    const selectedObjectionText = document.getElementById('selected-objection-text');
    const rebuttalsTitle = document.getElementById('rebuttals-title');
    const studentNameInput = document.getElementById('student-name');
    const leaderNameInput = document.getElementById('leader-name');
    const welcomeUsername = document.getElementById('welcome-username');
    const manualContainer = document.getElementById('manual-container');
    const scriptStepsContainer = document.getElementById('script-steps-container');
    const currentYearSpan = document.getElementById('currentYear');
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const htmlTag = document.documentElement;
    // Dashboard elements
    const editNumbersBtn = document.getElementById('edit-numbers-btn');
    const performanceInputsContainer = document.getElementById('performance-inputs-container');
    const performanceInputs = document.getElementById('performance-inputs');
    const goalDetailsText = document.getElementById('goal-details-text');
    const conversionDetailsText = document.getElementById('conversion-details-text');
    const closingDetailsText = document.getElementById('closing-details-text');

    // Chart instances
    let goalChart, conversionChart, closingChart;

    // =================================================================================
    // FUNÇÕES DA APLICAÇÃO
    // =================================================================================
    
    function handleLogin(event) {
        event.preventDefault();
        const username = loginForm.username.value.trim().toLowerCase();
        const password = loginForm.password.value;
        readmeCeoNavItem.classList.add('hidden');
        if (validUsers[username] && validUsers[username] === password) {
            loginScreen.style.display = 'none';
            mainAppContent.classList.remove('hidden');
            document.body.classList.remove('justify-center');
            document.body.classList.add('justify-start', 'pt-6', 'md:pt-10');
            loginError.classList.add('hidden');
            welcomeUsername.textContent = username.charAt(0).toUpperCase() + username.slice(1);
            if (username === 'douglaspeixoto') {
                readmeCeoNavItem.classList.remove('hidden');
            }
            switchTab('dashboard');
            renderDashboard();
        } else {
            loginError.textContent = 'Utilizador ou senha inválidos.';
            loginError.classList.remove('hidden');
        }
    }

    function applyDarkMode(isDark) {
        htmlTag.classList.toggle('dark', isDark);
        darkModeToggle.checked = isDark;
    }

    function toggleDarkMode() {
        const isDark = darkModeToggle.checked;
        localStorage.setItem('darkMode', isDark);
        applyDarkMode(isDark);
        renderDashboard(); // Re-render charts with new theme colors
    }

    function getPersonalizedText(text) {
        const studentName = studentNameInput.value.trim() || '[aluno]';
        const leaderName = leaderNameInput.value.trim() || '[líder]';
        return text.replace(/\[aluno\]/gi, `<strong>${studentName}</strong>`)
                   .replace(/\[líder\]/gi, `<strong>${leaderName}</strong>`)
                   .replace(/\[Nome do Responsável\]/gi, '<strong>[Nome do Responsável]</strong>')
                   .replace(/\[Seu Nome\]/gi, '<strong>[Seu Nome]</strong>')
                   .replace(/\[dor do cliente\]/gi, '<strong>[dor do cliente]</strong>')
                   .replace(/\[nome da turma\]/gi, '<strong>[Nome da Turma]</strong>')
                   .replace(/\[dias\]/gi, '<strong>[Dias]</strong>')
                   .replace(/\[horário\]/gi, '<strong>[Horário]</strong>')
                   .replace(/\[nome do professor\]/gi, '<strong>[Nome do Professor]</strong>')
                   .replace(/Valor Social/g, '<strong>Valor Social</strong>')
                   .replace(/\[valor com desconto\]/gi, '<strong>[Valor com Desconto]</strong>')
                   .replace(/\[valor do material\]/gi, '<strong>[Valor do Material]</strong>')
                   .replace(/\[dia da semana\]/gi, '<strong>[Dia da semana]</strong>')
                   .replace(/\[ponto chave da sondagem\]/gi, '<strong>[ponto chave da sondagem]</strong>');
    }

    function populateObjections(searchTerm = '') {
        const currentSelection = objectionSelect.value;
        objectionSelect.innerHTML = '<option value="">-- Escolha uma objeção --</option>';
        const filteredData = salesData.filter(item =>
            item.objection.toLowerCase().includes(searchTerm.toLowerCase())
        );
        filteredData.forEach(item => {
            const option = document.createElement('option');
            option.value = item.id;
            option.textContent = item.objection;
            objectionSelect.appendChild(option);
        });
        if (filteredData.some(item => item.id === currentSelection)) {
            objectionSelect.value = currentSelection;
        }
    }

    function displayRebuttals(objectionId) {
        rebuttalsContainer.innerHTML = '';
        if (!objectionId) {
            rebuttalsTitle.classList.add('hidden');
            selectedObjectionContainer.classList.add('hidden');
            return;
        }
        const selectedData = salesData.find(item => item.id === objectionId);
        if (selectedData) {
            selectedObjectionText.innerHTML = getPersonalizedText(selectedData.objection);
            selectedObjectionContainer.classList.remove('hidden');
            rebuttalsTitle.classList.remove('hidden');
            selectedData.rebuttals.forEach((rebuttal) => {
                const card = document.createElement('div');
                card.className = 'rebuttal-card bg-slate-50 dark:bg-slate-700/60 p-4 md:p-5 rounded-lg shadow-md border-l-4 border-blue-500 hover:shadow-lg transition-shadow duration-200';
                const content = document.createElement('p');
                content.className = 'text-slate-700 dark:text-slate-300 text-sm md:text-base leading-relaxed';
                content.innerHTML = getPersonalizedText(rebuttal);
                const copyButton = document.createElement('button');
                copyButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg> Copiar`;
                copyButton.className = 'flex items-center mt-4 text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold transition-colors';
                copyButton.onclick = () => {
                    const originalText = copyButton.innerHTML;
                    navigator.clipboard.writeText(content.textContent).then(() => {
                        copyButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg> Copiado!`;
                        setTimeout(() => { copyButton.innerHTML = originalText; }, 2000);
                    }).catch(err => console.error('Erro ao copiar texto: ', err));
                };
                card.appendChild(content);
                card.appendChild(copyButton);
                rebuttalsContainer.appendChild(card);
            });
            rebuttalsTitle.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            rebuttalsTitle.classList.add('hidden');
            selectedObjectionContainer.classList.add('hidden');
        }
    }

    function createManual() {
        if (!manualContainer) return;
        manualContainer.innerHTML = '';
        manualModules.forEach(module => {
            const details = document.createElement('details');
            details.className = 'bg-slate-50 dark:bg-slate-700/60 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200';
            const summary = document.createElement('summary');
            summary.className = 'font-semibold text-blue-600 dark:text-blue-400 cursor-pointer hover:text-blue-800 dark:hover:text-blue-300 text-md';
            summary.textContent = module.title;
            const contentDiv = document.createElement('div');
            contentDiv.className = 'manual-module-content';
            contentDiv.innerHTML = getPersonalizedText(module.content);
            details.appendChild(summary);
            details.appendChild(contentDiv);
            manualContainer.appendChild(details);
        });
    }

    function createScriptHelper() {
        if (!scriptStepsContainer) return;
        scriptStepsContainer.innerHTML = '';
        scriptSteps.forEach(step => {
            const details = document.createElement('details');
            details.className = 'script-example bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200';
            const summary = document.createElement('summary');
            summary.className = 'font-semibold text-lg text-blue-800 dark:text-blue-300 cursor-pointer';
            summary.textContent = step.title;
            const contentDiv = document.createElement('div');
            contentDiv.className = 'script-step-content';
            contentDiv.innerHTML = getPersonalizedText(step.content);
            details.appendChild(summary);
            details.appendChild(contentDiv);
            scriptStepsContainer.appendChild(details);
        });
    }

    function renderDashboard() {
        const target = parseInt(document.getElementById('target-input').value) || 0;
        const achieved = parseInt(document.getElementById('achieved-input').value) || 0;
        const visits = parseInt(document.getElementById('visits-input').value) || 0;
        const closings = parseInt(document.getElementById('closings-input').value) || 0;
        
        const isDark = htmlTag.classList.contains('dark');
        const fontColor = isDark ? '#cbd5e1' : '#475569';
        Chart.defaults.color = fontColor;

        // Goal Chart
        const goalProgress = target > 0 ? Math.min((achieved / target) * 100, 100) : 0;
        goalDetailsText.textContent = `(${achieved} de ${target} matrículas)`;
        const goalData = {
            labels: ['Alcançado', 'Faltando'],
            datasets: [{
                data: [achieved, Math.max(0, target - achieved)],
                backgroundColor: ['#2563eb', '#334155'],
                borderColor: isDark ? '#0f172a' : '#f1f5f9',
                borderWidth: 5,
                hoverOffset: 4
            }]
        };
        if(goalChart) goalChart.destroy();
        goalChart = new Chart(document.getElementById('goal-chart'), createChartConfig(goalData, `${goalProgress.toFixed(0)}%`));
        
        // Conversion Chart
        const conversionRate = visits > 0 ? (achieved / visits) * 100 : 0;
        conversionDetailsText.textContent = `(${achieved} matrículas de ${visits} visitas)`;
        const conversionData = {
            labels: ['Matrículas', 'Visitas sem Matrícula'],
            datasets: [{
                data: [achieved, Math.max(0, visits - achieved)],
                backgroundColor: ['#16a34a', '#334155'],
                borderColor: isDark ? '#0f172a' : '#f1f5f9',
                borderWidth: 5,
                hoverOffset: 4
            }]
        };
        if(conversionChart) conversionChart.destroy();
        conversionChart = new Chart(document.getElementById('conversion-chart'), createChartConfig(conversionData, `${conversionRate.toFixed(1)}%`));

        // Closing Chart
        const closingRate = visits > 0 ? (closings / visits) * 100 : 0;
        closingDetailsText.textContent = `(${closings} atendimentos de ${visits} visitas)`;
        const closingData = {
            labels: ['Concluídos', 'Não Concluídos'],
            datasets: [{
                data: [closings, Math.max(0, visits - closings)],
                backgroundColor: ['#0d9488', '#334155'],
                borderColor: isDark ? '#0f172a' : '#f1f5f9',
                borderWidth: 5,
                hoverOffset: 4
            }]
        };
        if(closingChart) closingChart.destroy();
        closingChart = new Chart(document.getElementById('closing-chart'), createChartConfig(closingData, `${closingRate.toFixed(1)}%`));
    }

    function createChartConfig(data, centerText) {
        const isDark = htmlTag.classList.contains('dark');
        return {
            type: 'doughnut',
            data: data,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        enabled: true,
                        backgroundColor: isDark ? '#334155' : '#475569'
                    }
                }
            },
            plugins: [{
                id: 'centerText',
                beforeDraw: function(chart) {
                    const ctx = chart.ctx;
                    const centerConfig = {
                        x: chart.getDatasetMeta(0).data[0].x,
                        y: chart.getDatasetMeta(0).data[0].y,
                    };
                    ctx.save();
                    ctx.font = 'bold 2rem Inter, sans-serif';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillStyle = isDark ? '#e2e8f0' : '#1e293b';
                    ctx.fillText(centerText, centerConfig.x, centerConfig.y);
                    ctx.restore();
                }
            }]
        };
    }
    
    function switchTab(targetId) {
        contentSections.forEach(section => section.classList.toggle('active', section.id === targetId));
        tabButtons.forEach(button => {
            const isTargetButton = button.getAttribute('data-tabs-target') === `#${targetId}`;
            button.classList.toggle('tab-active', isTargetButton);
            button.classList.toggle('tab-inactive', !isTargetButton);
            button.setAttribute('aria-selected', isTargetButton);
        });
        if (targetId === 'script-helper') createScriptHelper();
        if (targetId === 'manual') createManual();
        if (targetId === 'dashboard') renderDashboard();
    }

    // =================================================================================
    // EVENT LISTENERS
    // =================================================================================
    if (loginForm) loginForm.addEventListener('submit', handleLogin);
    if (darkModeToggle) darkModeToggle.addEventListener('change', toggleDarkMode);
    
    const personalizerFunction = () => {
        displayRebuttals(objectionSelect.value);
        createScriptHelper();
        createManual();
    };
    studentNameInput.addEventListener('input', personalizerFunction);
    leaderNameInput.addEventListener('input', personalizerFunction);
    
    if (objectionSearch) objectionSearch.addEventListener('input', (e) => populateObjections(e.target.value));
    if (objectionSelect) objectionSelect.addEventListener('change', (e) => displayRebuttals(e.target.value));
    
    if (performanceInputs) performanceInputs.addEventListener('input', renderDashboard);
    if (editNumbersBtn) editNumbersBtn.addEventListener('click', () => {
        performanceInputsContainer.classList.toggle('hidden');
    });

    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            if (!button.classList.contains('cursor-not-allowed')) {
                const targetId = button.getAttribute('data-tabs-target').substring(1);
                switchTab(targetId);
            }
        });
    });

    // =================================================================================
    // INICIALIZAÇÃO DA APLICAÇÃO
    // =================================================================================
    if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
    populateObjections();
    createManual();
    createScriptHelper();
    renderDashboard(); // Initial render for dashboard
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const savedDarkMode = localStorage.getItem('darkMode');
    applyDarkMode(savedDarkMode === null ? prefersDark : JSON.parse(savedDarkMode));
});
</script>
</body>
</html>
